{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, withKeys as _withKeys, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"title\"\n}, \"SCAU翡翠ERP系统\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"login-code\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  key: 1\n};\nconst _hoisted_7 = {\n  key: 0,\n  style: {\n    \"float\": \"right\"\n  }\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"el-login-footer\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Copyright © 2018-2023 ruoyi.vip All Rights Reserved.\")], -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_svg_icon = _resolveComponent(\"svg-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_form, {\n    ref: \"loginForm\",\n    model: $data.loginForm,\n    rules: $data.loginRules,\n    class: \"login-form\"\n  }, {\n    default: _withCtx(() => [_hoisted_2, _createVNode(_component_el_form_item, {\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.loginForm.username = $event),\n        type: \"text\",\n        \"auto-complete\": \"off\",\n        placeholder: \"账号\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_svg_icon, {\n          slot: \"prefix\",\n          \"icon-class\": \"user\",\n          class: \"el-input__icon input-icon\"\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.loginForm.password = $event),\n        type: \"password\",\n        \"auto-complete\": \"off\",\n        placeholder: \"密码\",\n        onKeyup: _withKeys($options.handleLogin, [\"enter\", \"native\"])\n      }, {\n        default: _withCtx(() => [_createVNode(_component_svg_icon, {\n          slot: \"prefix\",\n          \"icon-class\": \"password\",\n          class: \"el-input__icon input-icon\"\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"])]),\n      _: 1 /* STABLE */\n    }), $data.captchaEnabled ? (_openBlock(), _createBlock(_component_el_form_item, {\n      key: 0,\n      prop: \"code\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.code,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.loginForm.code = $event),\n        \"auto-complete\": \"off\",\n        placeholder: \"验证码\",\n        style: {\n          \"width\": \"63%\"\n        },\n        onKeyup: _withKeys($options.handleLogin, [\"enter\", \"native\"])\n      }, {\n        default: _withCtx(() => [_createVNode(_component_svg_icon, {\n          slot: \"prefix\",\n          \"icon-class\": \"validCode\",\n          class: \"el-input__icon input-icon\"\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\", \"onKeyup\"]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n        src: $data.codeUrl,\n        onClick: _cache[3] || (_cache[3] = (...args) => $options.getCode && $options.getCode(...args)),\n        class: \"login-code-img\"\n      }, null, 8 /* PROPS */, _hoisted_4)])]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_checkbox, {\n      modelValue: $data.loginForm.rememberMe,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.loginForm.rememberMe = $event),\n      style: {\n        \"margin\": \"0px 0px 25px 0px\"\n      }\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"记住密码\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_form_item, {\n      style: {\n        \"width\": \"100%\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        loading: $data.loading,\n        size: \"medium\",\n        type: \"primary\",\n        style: {\n          \"width\": \"100%\"\n        },\n        onClick: _withModifiers($options.handleLogin, [\"prevent\"])\n      }, {\n        default: _withCtx(() => [!$data.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"登 录\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \"登 录 中...\"))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"loading\", \"onClick\"]), $data.register ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode(_component_router_link, {\n        class: \"link-type\",\n        to: '/register'\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"立即注册\")]),\n        _: 1 /* STABLE */\n      })])) : _createCommentVNode(\"v-if\", true)]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"]), _createCommentVNode(\"  底部  \"), _hoisted_8]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","_createElementBlock","_hoisted_1","_createVNode","_component_el_form","ref","model","$data","loginForm","rules","loginRules","_hoisted_2","_component_el_form_item","prop","_component_el_input","username","$event","type","placeholder","_component_svg_icon","slot","password","onKeyup","_withKeys","$options","handleLogin","captchaEnabled","_createBlock","code","_hoisted_3","src","codeUrl","onClick","_cache","args","getCode","_component_el_checkbox","rememberMe","_component_el_button","loading","size","_withModifiers","_hoisted_5","_hoisted_6","register","_hoisted_7","_component_router_link","to","_createCommentVNode","_hoisted_8"],"sources":["D:\\devprojects\\VsProjects\\Tobacco\\tobacco\\src\\views\\login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login\">\r\n      <el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\" class=\"login-form\">\r\n        <h3 class=\"title\">SCAU翡翠ERP系统</h3>\r\n        <el-form-item prop=\"username\">\r\n          <el-input\r\n            v-model=\"loginForm.username\"\r\n            type=\"text\"\r\n            auto-complete=\"off\"\r\n            placeholder=\"账号\"\r\n          >\r\n            <svg-icon slot=\"prefix\" icon-class=\"user\" class=\"el-input__icon input-icon\" />\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\">\r\n          <el-input\r\n            v-model=\"loginForm.password\"\r\n            type=\"password\"\r\n            auto-complete=\"off\"\r\n            placeholder=\"密码\"\r\n            @keyup.enter.native=\"handleLogin\"\r\n          >\r\n            <svg-icon slot=\"prefix\" icon-class=\"password\" class=\"el-input__icon input-icon\" />\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"code\" v-if=\"captchaEnabled\">\r\n          <el-input\r\n            v-model=\"loginForm.code\"\r\n            auto-complete=\"off\"\r\n            placeholder=\"验证码\"\r\n            style=\"width: 63%\"\r\n            @keyup.enter.native=\"handleLogin\"\r\n          >\r\n            <svg-icon slot=\"prefix\" icon-class=\"validCode\" class=\"el-input__icon input-icon\" />\r\n          </el-input>\r\n          <div class=\"login-code\">\r\n            <img :src=\"codeUrl\" @click=\"getCode\" class=\"login-code-img\"/>\r\n          </div>\r\n        </el-form-item>\r\n        <el-checkbox v-model=\"loginForm.rememberMe\" style=\"margin:0px 0px 25px 0px;\">记住密码</el-checkbox>\r\n        <el-form-item style=\"width:100%;\">\r\n          <el-button\r\n            :loading=\"loading\"\r\n            size=\"medium\"\r\n            type=\"primary\"\r\n            style=\"width:100%;\"\r\n            @click.native.prevent=\"handleLogin\"\r\n          >\r\n            <span v-if=\"!loading\">登 录</span>\r\n            <span v-else>登 录 中...</span>\r\n          </el-button>\r\n          <div style=\"float: right;\" v-if=\"register\">\r\n            <router-link class=\"link-type\" :to=\"'/register'\">立即注册</router-link>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!--  底部  -->\r\n      <div class=\"el-login-footer\">\r\n        <span>Copyright © 2018-2023 ruoyi.vip All Rights Reserved.</span>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { getCodeImg } from \"@/api/login\";\r\n  import Cookies from \"js-cookie\";\r\n  import { encrypt, decrypt } from '@/utils/jsencrypt'\r\n  \r\n  export default {\r\n    name: \"Login\",\r\n    data() {\r\n      return {\r\n        codeUrl: \"\",\r\n        loginForm: {\r\n          username: \"admin\",\r\n          password: \"admin123\",\r\n          rememberMe: false,\r\n          code: \"\",\r\n          uuid: \"\"\r\n        },\r\n        loginRules: {\r\n          username: [\r\n            { required: true, trigger: \"blur\", message: \"请输入您的账号\" }\r\n          ],\r\n          password: [\r\n            { required: true, trigger: \"blur\", message: \"请输入您的密码\" }\r\n          ],\r\n          code: [{ required: true, trigger: \"change\", message: \"请输入验证码\" }]\r\n        },\r\n        loading: false,\r\n        // 验证码开关\r\n        captchaEnabled: true,\r\n        // 注册开关\r\n        register: false,\r\n        redirect: undefined\r\n      };\r\n    },\r\n    watch: {\r\n      $route: {\r\n        handler: function(route) {\r\n          this.redirect = route.query && route.query.redirect;\r\n        },\r\n        immediate: true\r\n      }\r\n    },\r\n    created() {\r\n      // this.getCode();\r\n      // this.getCookie();\r\n    },\r\n    methods: {\r\n      getCode() {\r\n        getCodeImg().then(res => {\r\n          this.captchaEnabled = res.captchaEnabled === undefined ? true : res.captchaEnabled;\r\n          if (this.captchaEnabled) {\r\n            this.codeUrl = \"data:image/gif;base64,\" + res.img;\r\n            this.loginForm.uuid = res.uuid;\r\n          }\r\n        });\r\n      },\r\n      getCookie() {\r\n        const username = Cookies.get(\"username\");\r\n        const password = Cookies.get(\"password\");\r\n        const rememberMe = Cookies.get('rememberMe')\r\n        this.loginForm = {\r\n          username: username === undefined ? this.loginForm.username : username,\r\n          password: password === undefined ? this.loginForm.password : decrypt(password),\r\n          rememberMe: rememberMe === undefined ? false : Boolean(rememberMe)\r\n        };\r\n      },\r\n      handleLogin() {\r\n        this.$refs.loginForm.validate(valid => {\r\n          if (valid) {\r\n            this.loading = true;\r\n            if (this.loginForm.rememberMe) {\r\n              Cookies.set(\"username\", this.loginForm.username, { expires: 30 });\r\n              Cookies.set(\"password\", encrypt(this.loginForm.password), { expires: 30 });\r\n              Cookies.set('rememberMe', this.loginForm.rememberMe, { expires: 30 });\r\n            } else {\r\n              Cookies.remove(\"username\");\r\n              Cookies.remove(\"password\");\r\n              Cookies.remove('rememberMe');\r\n            }\r\n            this.$store.dispatch(\"Login\", this.loginForm).then(() => {\r\n              this.$router.push({ path: this.redirect || \"/\" }).catch(()=>{});\r\n            }).catch(() => {\r\n              this.loading = false;\r\n              if (this.captchaEnabled) {\r\n                this.getCode();\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style rel=\"stylesheet/scss\" lang=\"scss\">\r\n  .login {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100%;\r\n    // background-image: url(\"../assets/images/login-background.jpg\");\r\n    background-size: cover;\r\n  }\r\n  .title {\r\n    margin: 0px auto 30px auto;\r\n    text-align: center;\r\n    color: #e20a0a;\r\n  }\r\n  \r\n  .login-form {\r\n    border-radius: 6px;\r\n    background: #ffffff;\r\n    width: 400px;\r\n    padding: 25px 25px 5px 25px;\r\n    .el-input {\r\n      height: 38px;\r\n      input {\r\n        height: 38px;\r\n      }\r\n    }\r\n    .input-icon {\r\n      height: 39px;\r\n      width: 14px;\r\n      margin-left: 2px;\r\n    }\r\n  }\r\n  .login-tip {\r\n    font-size: 13px;\r\n    text-align: center;\r\n    color: #bfbfbf;\r\n  }\r\n  .login-code {\r\n    width: 33%;\r\n    height: 38px;\r\n    float: right;\r\n    img {\r\n      cursor: pointer;\r\n      vertical-align: middle;\r\n    }\r\n  }\r\n  .el-login-footer {\r\n    height: 40px;\r\n    line-height: 40px;\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 100%;\r\n    text-align: center;\r\n    color: #fff;\r\n    font-family: Arial;\r\n    font-size: 12px;\r\n    letter-spacing: 1px;\r\n  }\r\n  .login-code-img {\r\n    height: 38px;\r\n  }\r\n  </style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}