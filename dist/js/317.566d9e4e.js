"use strict";(self["webpackChunkERP"]=self["webpackChunkERP"]||[]).push([[317],{9895:function(e,a,t){t.d(a,{Gc:function(){return h},JV:function(){return i},Jq:function(){return f},Nq:function(){return r},Rd:function(){return p},_d:function(){return s},cn:function(){return m},fY:function(){return c},h8:function(){return u},lE:function(){return n},wv:function(){return o},yC:function(){return d},yO:function(){return V}});var l=t(2334);function n(e,a){return(0,l.Z)({url:"/system/user/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:a}})}function o(e){return(0,l.Z)({url:"/system/user/changeStatus",headers:{isToken:!0},method:"put",data:e})}function d(e,a,t,n){return(0,l.Z)({url:"/system/user/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:a,userName:t,nickName:n}})}function m(e){return(0,l.Z)({url:"/system/user",headers:{isToken:!0},method:"post",data:e})}function r(e){return(0,l.Z)({url:"/system/user/",headers:{isToken:!0},method:"put",data:e})}function u(e){return(0,l.Z)({url:"/system/user/"+e,headers:{isToken:!0},method:"delete"})}function i(e,a){return(0,l.Z)({url:"/system/role/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:a}})}function s(e){return(0,l.Z)({url:"/system/role",headers:{isToken:!0},method:"post",data:e})}function p(e){return(0,l.Z)({url:"/system/role/"+e,headers:{isToken:!0},method:"delete"})}function c(e,a){return(0,l.Z)({url:"/system/tenant/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:a}})}function h(e){return(0,l.Z)({url:"/system/tenant",headers:{isToken:!0},method:"post",data:e})}function f(e){return(0,l.Z)({url:"/system/tenant/",headers:{isToken:!0},method:"put",data:e})}function V(e){return(0,l.Z)({url:"/system/tenant/"+e,headers:{isToken:!0},method:"delete"})}},5317:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var l=t(3396);const n={class:"front"},o={class:"tail"},d={class:"tail-action"},m={class:"pagination"},r={class:"dialog-list"},u={class:"dialog-footer"},i={class:"dialog-footer"};function s(e,a,t,s,p,c){const h=(0,l.up)("el-input"),f=(0,l.up)("el-form-item"),V=(0,l.up)("el-form"),g=(0,l.up)("el-button"),W=(0,l.up)("el-table-column"),w=(0,l.up)("el-table"),b=(0,l.up)("el-pagination"),k=(0,l.up)("el-date-picker"),_=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",n,[(0,l.Wm)(V,{model:e.searchForm,"label-width":"120px"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"input",label:"租户名称"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.searchForm.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.searchForm.name=a)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{class:"input",label:"手机号"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.searchForm.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.searchForm.name=a)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,l.Wm)(g,{class:"search",type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("查询")])),_:1})]),(0,l._)("div",o,[(0,l._)("div",d,[(0,l.Wm)(g,{type:"primary",onClick:a[2]||(a[2]=a=>e.dialogVisible1=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("新增租户")])),_:1})]),(0,l.Wm)(w,{data:e.tableData(),border:"",style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{type:"selection","min-width":"40"}),(0,l.Wm)(W,{prop:"tenantCode",label:"租户编码","min-width":"60"}),(0,l.Wm)(W,{prop:"tenantName",label:"租户名称","min-width":"60"}),(0,l.Wm)(W,{prop:"phonenumber",label:"手机号","min-width":"60"}),(0,l.Wm)(W,{prop:"address",label:"租户地址","min-width":"60"}),(0,l.Wm)(W,{prop:"remark",label:"备注","min-width":"60"}),(0,l.Wm)(W,{prop:"email",label:"租户邮箱","min-width":"60"}),(0,l.Wm)(W,{prop:"createTime",label:"创建时间","min-width":"60"}),(0,l.Wm)(W,{fixed:"right",label:"Operations",width:"120PX"},{default:(0,l.w5)((a=>[(0,l.Wm)(g,{link:"",type:"primary",size:"small",onClick:t=>e.handleOpenEdit(a.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("编辑")])),_:2},1032,["onClick"]),(0,l.Wm)(g,{link:"",type:"primary",size:"small",onClick:t=>e.handleDeleteTenant(a.row.tenantCode)},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l._)("div",m,[(0,l.Wm)(b,{"current-page":e.data.page,"onUpdate:currentPage":a[3]||(a[3]=a=>e.data.page=a),"page-size":e.data.limit,"onUpdate:pageSize":a[4]||(a[4]=a=>e.data.limit=a),layout:"prev, pager, next ,total,sizes",total:e.data.total,onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]),(0,l._)("div",r,[(0,l.Wm)(_,{modelValue:e.dialogVisible1,"onUpdate:modelValue":a[17]||(a[17]=a=>e.dialogVisible1=a),title:"新增租户",width:"30%","show-close":!1,"close-on-click-modal":!0},{footer:(0,l.w5)((()=>[(0,l._)("span",u,[(0,l.Wm)(g,{onClick:a[16]||(a[16]=a=>e.dialogVisible1=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(g,{type:"primary",onClick:e.handleAddTenant},{default:(0,l.w5)((()=>[(0,l.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(V,{model:e.tenantForm,"label-width":"120px",rules:e.tenantRules},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{label:"租户编号",prop:"tenantCode",required:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.tenantCode,"onUpdate:modelValue":a[5]||(a[5]=a=>e.tenantForm.tenantCode=a),placeholder:"请输入租户编号"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"租户公司名称",prop:"tenantCode",required:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.tenantName,"onUpdate:modelValue":a[6]||(a[6]=a=>e.tenantForm.tenantName=a),placeholder:"请输入租户公司名称"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"管理员用户主键"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.adminId,"onUpdate:modelValue":a[7]||(a[7]=a=>e.tenantForm.adminId=a),placeholder:"请输入管理员用户主键"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"手机号码"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.phonenumber,"onUpdate:modelValue":a[8]||(a[8]=a=>e.tenantForm.phonenumber=a),placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"租户邮箱"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.email,"onUpdate:modelValue":a[9]||(a[9]=a=>e.tenantForm.email=a),placeholder:"请输入租户邮箱"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"联系地址"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.address,"onUpdate:modelValue":a[10]||(a[10]=a=>e.tenantForm.address=a),placeholder:"请输入联系地址"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"备注"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.remark,"onUpdate:modelValue":a[11]||(a[11]=a=>e.tenantForm.remark=a),placeholder:"请输入内容"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"限制容量"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.volumnLimit,"onUpdate:modelValue":a[12]||(a[12]=a=>e.tenantForm.volumnLimit=a),placeholder:"请输入限制容量"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"租户等级"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.tenantLevel,"onUpdate:modelValue":a[13]||(a[13]=a=>e.tenantForm.tenantLevel=a),placeholder:"请输入租户等级"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"有效期限"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{modelValue:e.tenantForm.tenantTerm,"onUpdate:modelValue":a[14]||(a[14]=a=>e.tenantForm.tenantTerm=a),type:"datetime",placeholder:"请输入有效期限"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"激活码"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.tenantKey,"onUpdate:modelValue":a[15]||(a[15]=a=>e.tenantForm.tenantKey=a),placeholder:"请输入激活码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"]),(0,l.Wm)(_,{modelValue:e.dialogVisible2,"onUpdate:modelValue":a[25]||(a[25]=a=>e.dialogVisible2=a),title:"编辑租户",width:"30%","show-close":!1},{footer:(0,l.w5)((()=>[(0,l._)("span",i,[(0,l.Wm)(g,{onClick:a[24]||(a[24]=a=>e.dialogVisible2=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(g,{type:"primary",onClick:e.handleUpdateTenant},{default:(0,l.w5)((()=>[(0,l.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(V,{model:e.tenantForm,"label-width":"120px"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{label:"租户名称"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.tenantName,"onUpdate:modelValue":a[18]||(a[18]=a=>e.tenantForm.tenantName=a)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"手机电话"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.phonenumber,"onUpdate:modelValue":a[19]||(a[19]=a=>e.tenantForm.phonenumber=a)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"租户地址"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.address,"onUpdate:modelValue":a[20]||(a[20]=a=>e.tenantForm.address=a)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"备注"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.remark,"onUpdate:modelValue":a[21]||(a[21]=a=>e.tenantForm.remark=a)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"租户等级"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.tenantLevel,"onUpdate:modelValue":a[22]||(a[22]=a=>e.tenantForm.tenantLevel=a)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(f,{label:"租户邮箱"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:e.tenantForm.email,"onUpdate:modelValue":a[23]||(a[23]=a=>e.tenantForm.email=a),placeholder:"请输入租户邮箱"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"])])],64)}var p=t(4870),c=t(2655),h=t(7178),f=t(9895),V=(0,l.aZ)({name:"TenantRole",components:{},setup(){let e=(0,p.qj)({data:[]});const a=(0,p.qj)({name:""}),t=(0,p.qj)({tenantCode:"",tenantName:"",phonenumber:"",adminId:"",tenantId:"",email:"",address:"",email:"",tenantLevel:1,tenantTerm:"",volumnLimit:30,remark:"",tenantKey:""}),n=(0,p.qj)({tenantCode:[{required:!0,message:"请输入内容",trigger:"blur"},{min:3,max:10,message:"账号长度 在 3 到 5长度之间",trigger:"blur"}]});let o=(0,p.iH)(!1);const d=(0,p.iH)(!1);let m=(0,p.qj)({data:{page:1,limit:10,total:e.data.length}});(0,l.bv)((()=>{s(m.data.page,m.data.limit)}));const r=()=>e.data,u=e=>{m.page=e,s(e,m.data.limit)},i=e=>{m.limit=e,s(m.data.page,e)},s=(a,t)=>{(0,f.fY)(a,t).then((a=>{e.data=a.rows,m.data.total=a.total}))},V=()=>{c.T.confirm("确认提交?").then((()=>{(0,f.Gc)(t).then((()=>{o.value=!1,s(m.data.page,m.data.limit)}))})).catch((()=>{}))},g=()=>{c.T.confirm("确认提交?").then((()=>{(0,f.Jq)(t).then((()=>{d.value=!1,s(m.data.page,m.data.limit)}))})).catch((()=>{}))},W=e=>{d.value=!0,t.phonenumber=e.phonenumber,t.tenantName=e.tenantName,t.tenantCode=e.tenantCode,t.address=e.address,t.remark=e.remark,t.tenantId=e.tenantId},w=e=>{c.T.confirm("是否要删除该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,f.yO)(e).then((()=>{s(m.data.page,m.data.limit),(0,h.z8)({type:"success",message:"删除成功"})}))})).catch((()=>{(0,h.z8)({type:"info",message:"取消操作"})}))};return{tenantData:e,dialogVisible1:o,dialogVisible2:d,searchForm:a,tenantForm:t,tenantRules:n,tableData:r,handleCurrentChange:u,handleOpenEdit:W,handleSizeChange:i,handleDeleteTenant:w,handleAddTenant:V,handleGetTenantList:s,handleUpdateTenant:g,...(0,p.BK)(m)}}}),g=t(89);const W=(0,g.Z)(V,[["render",s],["__scopeId","data-v-659afc3a"]]);var w=W}}]);
//# sourceMappingURL=317.566d9e4e.js.map