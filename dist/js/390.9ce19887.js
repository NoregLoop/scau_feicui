"use strict";(self["webpackChunkERP"]=self["webpackChunkERP"]||[]).push([[390],{8390:function(e,o,r){r.r(o),r.d(o,{default:function(){return w}});var i=r(3396),t=r(3862);const a={class:"login"},s=(0,i._)("h3",{class:"title"},"SCAU翡翠ERP系统",-1),l={key:0},n={key:1},d=(0,i._)("div",{class:"el-login-footer"},[(0,i._)("span",null,"Copyright © 2018-2023 ruoyi.vip All Rights Reserved.")],-1);function m(e,o,r,m,u,p){const c=(0,i.up)("svg-icon"),g=(0,i.up)("el-input"),h=(0,i.up)("el-form-item"),f=(0,i.up)("el-button"),w=(0,i.up)("el-form");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(w,{ref:"loginForm",model:u.loginForm,rules:u.loginRules,class:"login-form"},{default:(0,i.w5)((()=>[s,(0,i.Wm)(h,{prop:"username"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{modelValue:u.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=e=>u.loginForm.username=e),type:"text","auto-complete":"off",placeholder:"账号"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{slot:"prefix","icon-class":"user",class:"el-input__icon input-icon"})])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(h,{prop:"password"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{modelValue:u.loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=e=>u.loginForm.password=e),type:"password","auto-complete":"off",placeholder:"密码",onKeyup:(0,t.D2)(p.handleLogin,["enter","native"])},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{slot:"prefix","icon-class":"password",class:"el-input__icon input-icon"})])),_:1},8,["modelValue","onKeyup"])])),_:1}),(0,i.Wm)(h,{prop:"phone"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{modelValue:u.loginForm.phone,"onUpdate:modelValue":o[2]||(o[2]=e=>u.loginForm.phone=e),type:"text","auto-complete":"off",placeholder:"手机号",onKeyup:o[3]||(o[3]=(0,t.D2)((()=>{}),["enter","native"]))},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{slot:"prefix","icon-class":"password",class:"el-input__icon input-icon"})])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(h,{style:{width:"100%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{loading:u.loading,size:"medium",type:"primary",style:{width:"100%"},onClick:(0,t.iM)(p.handleLogin,["prevent"])},{default:(0,i.w5)((()=>[u.loading?((0,i.wg)(),(0,i.iD)("span",n,"注 册 中...")):((0,i.wg)(),(0,i.iD)("span",l,"注 册"))])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"]),d])}r(7658);var u=r(2223),p=r(680),c=r(1051),g={name:"Login",data(){return{codeUrl:"",loginForm:{username:"",password:"",phone:"",rememberMe:!1,code:"",uuid:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入您的账号"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},loading:!1,captchaEnabled:!0,redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created(){},methods:{getCode(){(0,u.bp)().then((e=>{this.captchaEnabled=void 0===e.captchaEnabled||e.captchaEnabled,this.captchaEnabled&&(this.codeUrl="data:image/gif;base64,"+e.img,this.loginForm.uuid=e.uuid)}))},getCookie(){const e=p.Z.get("username"),o=p.Z.get("password"),r=p.Z.get("rememberMe");this.loginForm={username:void 0===e?this.loginForm.username:e,password:void 0===o?this.loginForm.password:(0,c.p)(o),rememberMe:void 0!==r&&Boolean(r)}},handleLogin(){this.$refs.loginForm.validate((e=>{e&&(this.loading=!0,this.loginForm.rememberMe?(p.Z.set("username",this.loginForm.username,{expires:30}),p.Z.set("password",(0,c.H)(this.loginForm.password),{expires:30}),p.Z.set("rememberMe",this.loginForm.rememberMe,{expires:30})):(p.Z.remove("username"),p.Z.remove("password"),p.Z.remove("rememberMe")),this.$store.dispatch("Login",this.loginForm).then((()=>{this.$router.push({path:this.redirect||"/"}).catch((()=>{}))})).catch((()=>{this.loading=!1,this.captchaEnabled&&this.getCode()})))}))}}},h=r(89);const f=(0,h.Z)(g,[["render",m]]);var w=f}}]);
//# sourceMappingURL=390.9ce19887.js.map