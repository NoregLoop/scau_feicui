"use strict";(self["webpackChunkERP"]=self["webpackChunkERP"]||[]).push([[699],{3896:function(e,a,l){l.d(a,{Aq:function(){return o},Hc:function(){return i},KF:function(){return r},eB:function(){return n},jR:function(){return s},pN:function(){return m},qL:function(){return u},x0:function(){return d}});var t=l(2334);function o(){return(0,t.Z)({url:"/system/warehouse/list",headers:{isToken:!0},method:"get"})}function r(e){return(0,t.Z)({url:"/system/warehouse",headers:{isToken:!0},method:"post",data:e})}function u(e){return(0,t.Z)({url:"/system/warehouse",headers:{isToken:!0},method:"put",data:e})}function d(e){return(0,t.Z)({url:"/system/warehouse/"+e,headers:{isToken:!0},method:"delete"})}function s(){return(0,t.Z)({url:"/system/storage/list",headers:{isToken:!0},method:"get"})}function m(e){return(0,t.Z)({url:"/system/storage",headers:{isToken:!0},method:"post",data:e})}function n(e){return(0,t.Z)({url:"/system/storage/"+e,headers:{isToken:!0},method:"delete"})}function i(e){return(0,t.Z)({url:"/system/storage",headers:{isToken:!0},method:"put",data:e})}},3699:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var t=l(3396),o=l(7139);const r={class:"front"},u={class:"tail"},d={class:"tail-action"},s={class:"pagination"},m={class:"dialog-list"},n={class:"dialog-footer"},i={class:"dialog-footer"};function h(e,a,l,h,w,p){const c=(0,t.up)("el-input"),f=(0,t.up)("el-form-item"),g=(0,t.up)("el-form"),W=(0,t.up)("el-button"),V=(0,t.up)("el-table-column"),b=(0,t.up)("el-tag"),k=(0,t.up)("el-table"),_=(0,t.up)("el-pagination"),C=(0,t.up)("el-switch"),y=(0,t.up)("el-text"),F=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",r,[(0,t.Wm)(g,{model:e.searchForm,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{class:"input",label:"仓库类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.searchForm.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.searchForm.name=a)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,t.Wm)(W,{class:"search",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1})]),(0,t._)("div",u,[(0,t._)("div",d,[(0,t.Wm)(W,{type:"primary",onClick:a[1]||(a[1]=a=>e.dialogVisible1=!0)},{default:(0,t.w5)((()=>[(0,t.Uk)("新增仓库")])),_:1})]),(0,t.Wm)(k,{data:e.tableData(),border:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{prop:"warehouseCode",label:"仓库编码","min-width":"60"}),(0,t.Wm)(V,{prop:"warehouseName",label:"仓库类型","min-width":"60"}),(0,t.Wm)(V,{prop:"createBy",label:"创建人","min-width":"60"}),(0,t.Wm)(V,{prop:"createTime",label:"创建时间","min-width":"60"}),(0,t.Wm)(V,{prop:"remark",label:"备注","min-width":"60"}),(0,t.Wm)(V,{prop:"isInOk",label:"允许入库","min-width":"80",filters:[{text:"允许",value:1},{text:"禁止",value:0}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},{default:(0,t.w5)((e=>[(0,t.Wm)(b,{type:1==e.row.status?"success":"danger","disable-transitions":""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(1==e.row.status?"允许":"禁止"),1)])),_:2},1032,["type"])])),_:1},8,["filter-method"]),(0,t.Wm)(V,{prop:"isOutOk",label:"允许出库","min-width":"80",filters:[{text:"允许",value:1},{text:"禁止",value:0}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},{default:(0,t.w5)((e=>[(0,t.Wm)(b,{type:1==e.row.status?"success":"danger","disable-transitions":""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(1==e.row.status?"允许":"禁止"),1)])),_:2},1032,["type"])])),_:1},8,["filter-method"]),(0,t.Wm)(V,{prop:"status",label:"状态","min-width":"80",filters:[{text:"启用",value:1},{text:"停用",value:0}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},{default:(0,t.w5)((e=>[(0,t.Wm)(b,{type:1==e.row.status?"success":"danger","disable-transitions":""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(1==e.row.status?"启用":"停用"),1)])),_:2},1032,["type"])])),_:1},8,["filter-method"]),(0,t.Wm)(V,{fixed:"right",label:"Operations","min-width":"60"},{default:(0,t.w5)((a=>[(0,t.Wm)(W,{link:"",type:"primary",size:"small",onClick:l=>e.handleOpenEdit(a.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:2},1032,["onClick"]),(0,t.Wm)(W,{link:"",type:"primary",size:"small",onClick:l=>e.handleDeleteRole(a.row.id)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",s,[(0,t.Wm)(_,{"current-page":e.data.page,"onUpdate:currentPage":a[2]||(a[2]=a=>e.data.page=a),"page-size":e.data.limit,"onUpdate:pageSize":a[3]||(a[3]=a=>e.data.limit=a),layout:"prev, pager, next ,total,sizes",total:e.data.total,onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]),(0,t._)("div",m,[(0,t.Wm)(F,{modelValue:e.dialogVisible1,"onUpdate:modelValue":a[13]||(a[13]=a=>e.dialogVisible1=a),title:"新建仓库",width:"30%","close-on-click-modal":!0,"show-close":!1},{footer:(0,t.w5)((()=>[(0,t._)("span",n,[(0,t.Wm)(W,{onClick:a[12]||(a[12]=a=>e.dialogVisible1=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(W,{type:"primary",onClick:e.handleAddWarehouse},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(g,{model:e.warehouseForm,"label-width":"120px",rules:e.warehouseRules},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{label:"仓库编码",prop:"warehouseCode",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.warehouseCode,"onUpdate:modelValue":a[4]||(a[4]=a=>e.warehouseForm.warehouseCode=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"仓库名称",prop:"warehouseName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.warehouseName,"onUpdate:modelValue":a[5]||(a[5]=a=>e.warehouseForm.warehouseName=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"城市",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.roleSort,"onUpdate:modelValue":a[6]||(a[6]=a=>e.warehouseForm.roleSort=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"地址",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.address,"onUpdate:modelValue":a[7]||(a[7]=a=>e.warehouseForm.address=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"最大容量",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.maxCap,"onUpdate:modelValue":a[8]||(a[8]=a=>e.warehouseForm.maxCap=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"备注"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.remark,"onUpdate:modelValue":a[9]||(a[9]=a=>e.warehouseForm.remark=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"允许入库"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:e.warehouseForm.isInOk,"onUpdate:modelValue":a[10]||(a[10]=a=>e.warehouseForm.isInOk=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),(0,t.Wm)(y,{tag:"ins",style:{"padding-left":"20px",color:"#1890ff"}})])),_:1}),(0,t.Wm)(f,{label:"允许出库"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:e.warehouseForm.isOutOk,"onUpdate:modelValue":a[11]||(a[11]=a=>e.warehouseForm.isOutOk=a),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),(0,t.Wm)(y,{tag:"ins",style:{"padding-left":"20px",color:"#1890ff"}})])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"]),(0,t.Wm)(F,{modelValue:e.dialogVisible2,"onUpdate:modelValue":a[21]||(a[21]=a=>e.dialogVisible2=a),title:"编辑仓库",width:"30%","before-close":e.handleClose,"show-close":!1},{footer:(0,t.w5)((()=>[(0,t._)("span",i,[(0,t.Wm)(W,{onClick:a[20]||(a[20]=a=>e.dialogVisible2=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(W,{type:"primary",onClick:e.handleUpdateWarehouse},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(g,{model:e.warehouseForm,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{label:"仓库编码",prop:"warehouseCode",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.warehouseCode,"onUpdate:modelValue":a[14]||(a[14]=a=>e.warehouseForm.warehouseCode=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"仓库名称",prop:"warehouseName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.warehouseName,"onUpdate:modelValue":a[15]||(a[15]=a=>e.warehouseForm.warehouseName=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"城市",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.city,"onUpdate:modelValue":a[16]||(a[16]=a=>e.warehouseForm.city=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"地址",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.address,"onUpdate:modelValue":a[17]||(a[17]=a=>e.warehouseForm.address=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"最大容量",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.maxCap,"onUpdate:modelValue":a[18]||(a[18]=a=>e.warehouseForm.maxCap=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"备注"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.warehouseForm.remark,"onUpdate:modelValue":a[19]||(a[19]=a=>e.warehouseForm.remark=a)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue","before-close"])])],64)}var w=l(4870),p=l(2655),c=l(7178),f=l(3896),g=(0,t.aZ)({name:"UserRole",components:{},setup(){let e=(0,w.qj)({data:[]});const a=(0,w.qj)({warehouseName:"",warehouseCode:"",remark:"",status:1,isInOk:"",isOutOk:"",deptId:"1",maxCap:"",city:"",address:"",id:""}),l=(0,w.qj)({name:""});let o=(0,w.iH)(!1);const r=(0,w.iH)(!1),u=(0,w.qj)({warehouseCode:[{required:!0,message:"请输入内容",trigger:"blur"}],warehouseName:[{required:!0,message:"请输入内容",trigger:"blur"},{min:3,max:10,message:"账号长度 在 3 到 10长度之间",trigger:"blur"}]});let d=(0,w.qj)({data:{page:1,limit:10,total:e.data.length}});const s=(e,a)=>a.status==e;(0,t.bv)((()=>{m(d.data.page,d.data.limit)}));const m=(a,l)=>{(0,f.Aq)(a,l).then((a=>{e.data=a.rows,d.data.total=a.total}))},n=()=>e.data,i=e=>{d.page=e,m(e,d.data.limit)},h=e=>{d.limit=e,m(d.data.page,e)},g=()=>{p.T.confirm("确认提交?").then((()=>{(0,f.KF)(a).then((()=>{o.value=!1,m(d.data.page,d.data.limit)}))})).catch((()=>{}))},W=e=>{r.value=!0,a.warehouseCode=e.warehouseCode,a.warehouseName=e.warehouseName,a.remark=e.remark,a.maxCap=e.maxCap,a.city=e.city,a.address=e.address,a.id=e.id},V=()=>{p.T.confirm("确认提交?").then((()=>{(0,f.qL)(a).then((()=>{r.value=!1,m(d.data.page,d.data.limit)}))})).catch((()=>{}))},b=e=>{p.T.confirm("是否要删除该仓库?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,f.x0)(e).then((()=>{m(d.data.page,d.data.limit),(0,c.z8)({type:"success",message:"删除成功"})}))})).catch((()=>{(0,c.z8)({type:"info",message:"取消操作"})}))},k=e=>{p.T.confirm("确认提交?").then((()=>{done()})).catch((()=>{}))};return{warehouseData:e,dialogVisible1:o,dialogVisible2:r,searchForm:l,warehouseForm:a,warehouseRules:u,tableData:n,filterTag:s,handleCurrentChange:i,handleSizeChange:h,handleClose:k,handleDeleteRole:b,handleAddWarehouse:g,handleGetWarehouseList:m,handleUpdateWarehouse:V,handleOpenEdit:W,...(0,w.BK)(d)}}}),W=l(89);const V=(0,W.Z)(g,[["render",h],["__scopeId","data-v-94880440"]]);var b=V}}]);
//# sourceMappingURL=699.3f763138.js.map