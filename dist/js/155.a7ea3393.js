"use strict";(self["webpackChunkERP"]=self["webpackChunkERP"]||[]).push([[155],{3026:function(e,a,l){l.d(a,{_R:function(){return i},m9:function(){return m},py:function(){return s},tI:function(){return o},wd:function(){return r},yS:function(){return d}});var t=l(2334);function o(e){return(0,t.Z)({url:"/system/streamSchedule",headers:{isToken:!0},method:"post",data:e})}function m(e,a){return(0,t.Z)({url:"/system/streamSchedule/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:a}})}function r(e){return(0,t.Z)({url:"/system/streamShop",headers:{isToken:!0},method:"post",data:e})}function d(e,a){return(0,t.Z)({url:"/system/streamShop/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:a}})}function s(e){return(0,t.Z)({url:"/system/streamHost",headers:{isToken:!0},method:"post",data:e})}function i(e,a){return(0,t.Z)({url:"/system/streamHost/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:a}})}},7155:function(e,a,l){l.r(a),l.d(a,{default:function(){return g}});var t=l(3396),o=l(7139);const m={class:"front"},r={class:"tail"},d={class:"tail-action"},s={class:"pagination"},i={class:"dialog-list"},n={class:"dialog-footer"},u={class:"dialog-footer"};function p(e,a,l,p,h,c){const f=(0,t.up)("el-input"),b=(0,t.up)("el-form-item"),w=(0,t.up)("el-form"),S=(0,t.up)("el-button"),k=(0,t.up)("el-table-column"),g=(0,t.up)("el-tag"),W=(0,t.up)("el-table"),_=(0,t.up)("el-pagination"),y=(0,t.up)("el-checkbox"),V=(0,t.up)("el-checkbox-group"),U=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",m,[(0,t.Wm)(w,{model:e.searchForm,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{class:"input",label:"店铺名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:e.searchForm.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.searchForm.name=a)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,t.Wm)(S,{class:"search",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1})]),(0,t._)("div",r,[(0,t._)("div",d,[(0,t.Wm)(S,{type:"primary",onClick:a[1]||(a[1]=a=>e.dialogVisible1=!0)},{default:(0,t.w5)((()=>[(0,t.Uk)("新增")])),_:1}),(0,t.Wm)(S,{type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("启用")])),_:1})]),(0,t.Wm)(W,{data:e.tableData(),border:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{prop:"id",label:"店铺编号","min-width":"40PX"}),(0,t.Wm)(k,{prop:"shopName",label:"平台店铺全称","min-width":"60PX"}),(0,t.Wm)(k,{prop:"userInfo",label:"店铺简称","min-width":"60PX"}),(0,t.Wm)(k,{prop:"userPhone",label:"平台类型","min-width":"50PX"}),(0,t.Wm)(k,{prop:"status",label:"用户状态",width:"100",filters:[{text:"启用",value:0},{text:"停用",value:1}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},{default:(0,t.w5)((e=>[(0,t.Wm)(g,{type:0==e.row.status?"success":"danger","disable-transitions":""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(0==e.row.status?"启用":"停用"),1)])),_:2},1032,["type"])])),_:1},8,["filter-method"]),(0,t.Wm)(k,{prop:"userPhone",label:"店铺授权剩于时间","min-width":"80PX"}),(0,t.Wm)(k,{prop:"createBy",label:"添加人","min-width":"50PX"}),(0,t.Wm)(k,{prop:"remark",label:"备注","max-width":"60PX"}),(0,t.Wm)(k,{prop:"createTime",label:"添加时间","min-width":"80PX"}),(0,t.Wm)(k,{fixed:"right",label:"操作","min-width":"60"},{default:(0,t.w5)((a=>[(0,t.Wm)(S,{link:"",type:"primary",size:"small",onClick:l=>e.handleOpenEdit(a.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:2},1032,["onClick"]),(0,t.Wm)(S,{link:"",type:"primary",size:"small",onClick:l=>e.handleOpenEdit(a.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("设置扣点")])),_:2},1032,["onClick"]),(0,t.Wm)(S,{link:"",type:"primary",size:"small",onClick:l=>e.handleDeleteStreamShop(a.row.streamShopId)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",s,[(0,t.Wm)(_,{"current-page":e.data.page,"onUpdate:currentPage":a[2]||(a[2]=a=>e.data.page=a),"page-size":e.data.limit,"onUpdate:pageSize":a[3]||(a[3]=a=>e.data.limit=a),layout:"prev, pager, next ,total,sizes",total:e.data.total,onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]),(0,t._)("div",i,[(0,t.Wm)(U,{modelValue:e.dialogVisible1,"onUpdate:modelValue":a[9]||(a[9]=a=>e.dialogVisible1=a),title:"新建角色",width:"30%","close-on-click-modal":!0,"show-close":!1},{footer:(0,t.w5)((()=>[(0,t._)("span",n,[(0,t.Wm)(S,{onClick:a[8]||(a[8]=a=>e.dialogVisible1=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(S,{type:"primary",onClick:e.handleAddStreamShop},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(w,{model:e.streamShopForm,"label-width":"120px",rules:e.streamShopRules},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{label:"角色名称",prop:"streamShopName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:e.streamShopForm.streamShopName,"onUpdate:modelValue":a[4]||(a[4]=a=>e.streamShopForm.streamShopName=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"权限字符",prop:"streamShopName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:e.streamShopForm.streamShopKey,"onUpdate:modelValue":a[5]||(a[5]=a=>e.streamShopForm.streamShopKey=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"角色顺序",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:e.streamShopForm.streamShopSort,"onUpdate:modelValue":a[6]||(a[6]=a=>e.streamShopForm.streamShopSort=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"角色权限"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{modelValue:e.streamShopForm.menuIds,"onUpdate:modelValue":a[7]||(a[7]=a=>e.streamShopForm.menuIds=a),class:"form-add-checkbox"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{label:"001",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("入库管理")])),_:1}),(0,t.Wm)(y,{label:"002",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("出库管理")])),_:1}),(0,t.Wm)(y,{label:"003",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("库存管理")])),_:1}),(0,t.Wm)(y,{label:"004",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("销售管理")])),_:1}),(0,t.Wm)(y,{label:"005",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("财务管理")])),_:1}),(0,t.Wm)(y,{label:"006",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("客户管理")])),_:1}),(0,t.Wm)(y,{label:"007",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("排班管理")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"]),(0,t.Wm)(U,{modelValue:e.dialogVisible2,"onUpdate:modelValue":a[15]||(a[15]=a=>e.dialogVisible2=a),title:"编辑用户",width:"30%","before-close":e.handleClose,"show-close":!1},{footer:(0,t.w5)((()=>[(0,t._)("span",u,[(0,t.Wm)(S,{onClick:a[13]||(a[13]=a=>e.dialogVisible2=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(S,{type:"primary",onClick:a[14]||(a[14]=a=>e.dialogVisible2=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1})])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(w,{model:e.streamShopForm,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{label:"角色名称",prop:"streamShopName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:e.streamShopForm.streamShopName,"onUpdate:modelValue":a[10]||(a[10]=a=>e.streamShopForm.streamShopName=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"权限字符",prop:"streamShopName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:e.streamShopForm.streamShopKey,"onUpdate:modelValue":a[11]||(a[11]=a=>e.streamShopForm.streamShopKey=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"角色权限"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{modelValue:e.streamShopForm.menuIds,"onUpdate:modelValue":a[12]||(a[12]=a=>e.streamShopForm.menuIds=a),class:"form-add-checkbox"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{label:"001",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("入库管理")])),_:1}),(0,t.Wm)(y,{label:"002",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("出库管理")])),_:1}),(0,t.Wm)(y,{label:"003",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("库存管理")])),_:1}),(0,t.Wm)(y,{label:"004",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("销售管理")])),_:1}),(0,t.Wm)(y,{label:"005",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("财务管理")])),_:1}),(0,t.Wm)(y,{label:"006",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("客户管理")])),_:1}),(0,t.Wm)(y,{label:"007",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("排班管理")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue","before-close"])])],64)}var h=l(4870),c=l(2655),f=l(7178),b=l(3026),w=(0,t.aZ)({name:"StreamShop",components:{},setup(){let e=(0,h.qj)({data:[]});const a=(0,h.qj)({streamShopName:"",streamShopKey:"",streamShopSort:"1",menuIds:[],remark:"",status:0,password:""}),l=(0,h.qj)({name:""});let o=(0,h.iH)(!1);const m=(0,h.iH)(!1),r=(0,h.qj)({streamShopName:[{required:!0,message:"请输入内容",trigger:"blur"},{min:3,max:10,message:"账号长度 在 3 到 10长度之间",trigger:"blur"}]});let d=(0,h.qj)({data:{page:1,limit:10,total:e.data.length}});const s=(e,a)=>a.status==e;(0,t.bv)((()=>{i(d.data.page,d.data.limit)}));const i=(a,l)=>{(0,b.yS)(a,l).then((a=>{e.data=a.rows,d.data.total=a.total}))},n=()=>e.data,u=e=>{d.page=e,i(e,d.data.limit)},p=e=>{d.limit=e,i(d.data.page,e)},w=()=>{c.T.confirm("确认提交?").then((()=>{a.streamShopKey=a.streamShopName,(0,b.wd)(a).then((()=>{o.value=!1,i(d.data.page,d.data.limit)}))})).catch((()=>{}))},S=e=>{c.T.confirm("是否要删除该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{deleteStreamShop(e).then((()=>{i(d.data.page,d.data.limit),(0,f.z8)({type:"success",message:"删除成功"})}))})).catch((()=>{(0,f.z8)({type:"info",message:"取消操作"})}))},k=e=>{m.value=!0,a.streamShopName=e.streamShopName,a.streamShopKey=e.streamShopName,a.menuIds=e.menuIds},g=e=>{c.T.confirm("确认提交?").then((()=>{done()})).catch((()=>{}))};return{streamShopData:e,dialogVisible1:o,dialogVisible2:m,searchForm:l,streamShopForm:a,streamShopRules:r,tableData:n,filterTag:s,handleCurrentChange:u,handleSizeChange:p,handleClose:g,handleDeleteStreamShop:S,handleAddStreamShop:w,handleGetStreamShopList:i,handleOpenEdit:k,...(0,h.BK)(d)}}}),S=l(89);const k=(0,S.Z)(w,[["render",p],["__scopeId","data-v-b0494fae"]]);var g=k}}]);
//# sourceMappingURL=155.a7ea3393.js.map