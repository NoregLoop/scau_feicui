"use strict";(self["webpackChunkERP"]=self["webpackChunkERP"]||[]).push([[292],{9895:function(e,l,a){a.d(l,{Gc:function(){return f},JV:function(){return i},Jq:function(){return h},Nq:function(){return n},Rd:function(){return c},_d:function(){return s},cn:function(){return m},fY:function(){return p},h8:function(){return u},lE:function(){return o},wv:function(){return r},yC:function(){return d},yO:function(){return b}});var t=a(2334);function o(e,l){return(0,t.Z)({url:"/system/user/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:l}})}function r(e){return(0,t.Z)({url:"/system/user/changeStatus",headers:{isToken:!0},method:"put",data:e})}function d(e,l,a,o){return(0,t.Z)({url:"/system/user/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:l,userName:a,nickName:o}})}function m(e){return(0,t.Z)({url:"/system/user",headers:{isToken:!0},method:"post",data:e})}function n(e){return(0,t.Z)({url:"/system/user/",headers:{isToken:!0},method:"put",data:e})}function u(e){return(0,t.Z)({url:"/system/user/"+e,headers:{isToken:!0},method:"delete"})}function i(e,l){return(0,t.Z)({url:"/system/role/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:l}})}function s(e){return(0,t.Z)({url:"/system/role",headers:{isToken:!0},method:"post",data:e})}function c(e){return(0,t.Z)({url:"/system/role/"+e,headers:{isToken:!0},method:"delete"})}function p(e,l){return(0,t.Z)({url:"/system/tenant/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:l}})}function f(e){return(0,t.Z)({url:"/system/tenant",headers:{isToken:!0},method:"post",data:e})}function h(e){return(0,t.Z)({url:"/system/tenant/",headers:{isToken:!0},method:"put",data:e})}function b(e){return(0,t.Z)({url:"/system/tenant/"+e,headers:{isToken:!0},method:"delete"})}},6292:function(e,l,a){a.r(l),a.d(l,{default:function(){return W}});var t=a(3396),o=a(7139);const r={class:"front"},d={class:"tail"},m={class:"tail-action"},n={class:"pagination"},u={class:"dialog-list"},i={class:"dialog-footer"},s={class:"dialog-footer"};function c(e,l,a,c,p,f){const h=(0,t.up)("el-input"),b=(0,t.up)("el-form-item"),k=(0,t.up)("el-form"),w=(0,t.up)("el-button"),g=(0,t.up)("el-table-column"),W=(0,t.up)("el-tag"),_=(0,t.up)("el-table"),y=(0,t.up)("el-pagination"),V=(0,t.up)("el-checkbox"),U=(0,t.up)("el-checkbox-group"),x=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",r,[(0,t.Wm)(k,{model:e.searchForm,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{class:"input",label:"角色名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:e.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchForm.name=l)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,t.Wm)(w,{class:"search",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1})]),(0,t._)("div",d,[(0,t._)("div",m,[(0,t.Wm)(w,{type:"primary",onClick:l[1]||(l[1]=l=>e.dialogVisible1=!0)},{default:(0,t.w5)((()=>[(0,t.Uk)("新增")])),_:1}),(0,t.Wm)(w,{type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("启用")])),_:1})]),(0,t.Wm)(_,{data:e.tableData(),border:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{type:"selection","min-width":"40"}),(0,t.Wm)(g,{prop:"roleId",label:"角色ID","min-width":"60"}),(0,t.Wm)(g,{prop:"roleName",label:"角色名称","min-width":"60"}),(0,t.Wm)(g,{prop:"roleKey",label:"角色权限","min-width":"60"}),(0,t.Wm)(g,{prop:"status",label:"角色状态",width:"100",filters:[{text:"启用",value:0},{text:"停用",value:1}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},{default:(0,t.w5)((e=>[(0,t.Wm)(W,{type:0==e.row.status?"success":"danger","disable-transitions":""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(0==e.row.status?"启用":"停用"),1)])),_:2},1032,["type"])])),_:1},8,["filter-method"]),(0,t.Wm)(g,{prop:"remark",label:"备注","min-width":"60"}),(0,t.Wm)(g,{prop:"createTime",label:"创建时间","min-width":"60"}),(0,t.Wm)(g,{fixed:"right",label:"Operations","min-width":"60"},{default:(0,t.w5)((l=>[(0,t.Wm)(w,{link:"",type:"primary",size:"small",onClick:a=>e.handleOpenEdit(l.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:2},1032,["onClick"]),(0,t.Wm)(w,{link:"",type:"primary",size:"small",onClick:a=>e.handleDeleteRole(l.row.roleId)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",n,[(0,t.Wm)(y,{"current-page":e.data.page,"onUpdate:currentPage":l[2]||(l[2]=l=>e.data.page=l),"page-size":e.data.limit,"onUpdate:pageSize":l[3]||(l[3]=l=>e.data.limit=l),layout:"prev, pager, next ,total,sizes",total:e.data.total,onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]),(0,t._)("div",u,[(0,t.Wm)(x,{modelValue:e.dialogVisible1,"onUpdate:modelValue":l[9]||(l[9]=l=>e.dialogVisible1=l),title:"新建角色",width:"30%","close-on-click-modal":!0,"show-close":!1},{footer:(0,t.w5)((()=>[(0,t._)("span",i,[(0,t.Wm)(w,{onClick:l[8]||(l[8]=l=>e.dialogVisible1=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(w,{type:"primary",onClick:e.handleAddRole},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(k,{model:e.roleForm,"label-width":"120px",rules:e.roleRules},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{label:"角色名称",prop:"roleName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:e.roleForm.roleName,"onUpdate:modelValue":l[4]||(l[4]=l=>e.roleForm.roleName=l)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"权限字符",prop:"roleName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:e.roleForm.roleKey,"onUpdate:modelValue":l[5]||(l[5]=l=>e.roleForm.roleKey=l)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"角色顺序",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:e.roleForm.roleSort,"onUpdate:modelValue":l[6]||(l[6]=l=>e.roleForm.roleSort=l)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"角色权限"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{modelValue:e.roleForm.menuIds,"onUpdate:modelValue":l[7]||(l[7]=l=>e.roleForm.menuIds=l),class:"form-add-checkbox"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{label:"001",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("入库管理")])),_:1}),(0,t.Wm)(V,{label:"002",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("出库管理")])),_:1}),(0,t.Wm)(V,{label:"003",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("库存管理")])),_:1}),(0,t.Wm)(V,{label:"004",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("销售管理")])),_:1}),(0,t.Wm)(V,{label:"005",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("财务管理")])),_:1}),(0,t.Wm)(V,{label:"006",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("客户管理")])),_:1}),(0,t.Wm)(V,{label:"007",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("排班管理")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"]),(0,t.Wm)(x,{modelValue:e.dialogVisible2,"onUpdate:modelValue":l[15]||(l[15]=l=>e.dialogVisible2=l),title:"编辑用户",width:"30%","before-close":e.handleClose,"show-close":!1},{footer:(0,t.w5)((()=>[(0,t._)("span",s,[(0,t.Wm)(w,{onClick:l[13]||(l[13]=l=>e.dialogVisible2=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(w,{type:"primary",onClick:l[14]||(l[14]=l=>e.dialogVisible2=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认 ")])),_:1})])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(k,{model:e.roleForm,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{label:"角色名称",prop:"roleName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:e.roleForm.roleName,"onUpdate:modelValue":l[10]||(l[10]=l=>e.roleForm.roleName=l)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"权限字符",prop:"roleName",required:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{modelValue:e.roleForm.roleKey,"onUpdate:modelValue":l[11]||(l[11]=l=>e.roleForm.roleKey=l)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{label:"角色权限"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{modelValue:e.roleForm.menuIds,"onUpdate:modelValue":l[12]||(l[12]=l=>e.roleForm.menuIds=l),class:"form-add-checkbox"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{label:"001",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("入库管理")])),_:1}),(0,t.Wm)(V,{label:"002",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("出库管理")])),_:1}),(0,t.Wm)(V,{label:"003",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("库存管理")])),_:1}),(0,t.Wm)(V,{label:"004",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("销售管理")])),_:1}),(0,t.Wm)(V,{label:"005",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("财务管理")])),_:1}),(0,t.Wm)(V,{label:"006",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("客户管理")])),_:1}),(0,t.Wm)(V,{label:"007",class:"form-add-checkbox-item"},{default:(0,t.w5)((()=>[(0,t.Uk)("排班管理")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue","before-close"])])],64)}var p=a(4870),f=a(2655),h=a(7178),b=a(9895),k=(0,t.aZ)({name:"UserRole",components:{},setup(){let e=(0,p.qj)({data:[]});const l=(0,p.qj)({roleName:"",roleKey:"",roleSort:"1",menuIds:[],remark:"",status:0,password:""}),a=(0,p.qj)({name:""});let o=(0,p.iH)(!1);const r=(0,p.iH)(!1),d=(0,p.qj)({roleName:[{required:!0,message:"请输入内容",trigger:"blur"},{min:3,max:10,message:"账号长度 在 3 到 10长度之间",trigger:"blur"}]});let m=(0,p.qj)({data:{page:1,limit:10,total:e.data.length}});const n=(e,l)=>l.status==e;(0,t.bv)((()=>{u(m.data.page,m.data.limit)}));const u=(l,a)=>{(0,b.JV)(l,a).then((l=>{e.data=l.rows,m.data.total=l.total}))},i=()=>e.data,s=e=>{m.page=e,u(e,m.data.limit)},c=e=>{m.limit=e,u(m.data.page,e)},k=()=>{f.T.confirm("确认提交?").then((()=>{l.roleKey=l.roleName,(0,b._d)(l).then((()=>{o.value=!1,u(m.data.page,m.data.limit)}))})).catch((()=>{}))},w=e=>{f.T.confirm("是否要删除该角色?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,b.Rd)(e).then((()=>{u(m.data.page,m.data.limit),(0,h.z8)({type:"success",message:"删除成功"})}))})).catch((()=>{(0,h.z8)({type:"info",message:"取消操作"})}))},g=e=>{r.value=!0,l.roleName=e.roleName,l.roleKey=e.roleName,l.menuIds=e.menuIds},W=e=>{f.T.confirm("确认提交?").then((()=>{done()})).catch((()=>{}))};return{roleData:e,dialogVisible1:o,dialogVisible2:r,searchForm:a,roleForm:l,roleRules:d,tableData:i,filterTag:n,handleCurrentChange:s,handleSizeChange:c,handleClose:W,handleDeleteRole:w,handleAddRole:k,handleGetRoleList:u,handleOpenEdit:g,...(0,p.BK)(m)}}}),w=a(89);const g=(0,w.Z)(k,[["render",c],["__scopeId","data-v-35f2c7dc"]]);var W=g}}]);
//# sourceMappingURL=292.39a7883d.js.map