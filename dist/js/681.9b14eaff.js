"use strict";(self["webpackChunkERP"]=self["webpackChunkERP"]||[]).push([[681],{3026:function(e,l,a){a.d(l,{_R:function(){return i},m9:function(){return u},py:function(){return r},tI:function(){return t},wd:function(){return m},yS:function(){return o}});var d=a(2334);function t(e){return(0,d.Z)({url:"/system/streamSchedule",headers:{isToken:!0},method:"post",data:e})}function u(e,l){return(0,d.Z)({url:"/system/streamSchedule/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:l}})}function m(e){return(0,d.Z)({url:"/system/streamShop",headers:{isToken:!0},method:"post",data:e})}function o(e,l){return(0,d.Z)({url:"/system/streamShop/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:l}})}function r(e){return(0,d.Z)({url:"/system/streamHost",headers:{isToken:!0},method:"post",data:e})}function i(e,l){return(0,d.Z)({url:"/system/streamHost/list",headers:{isToken:!0},method:"get",params:{pageNum:e,pageSize:l}})}},8025:function(e,l,a){a.r(l),a.d(l,{default:function(){return _}});var d=a(3396),t=a(7139);const u={class:"front"},m={class:"tail"},o={class:"tail-action"},r={class:"pagination"},i={class:"dialog-list"},s={class:"dialog-footer"},n={class:"dialog-footer"};function c(e,l,a,c,h,p){const w=(0,d.up)("el-input"),f=(0,d.up)("el-form-item"),W=(0,d.up)("el-form"),b=(0,d.up)("el-button"),_=(0,d.up)("el-table-column"),g=(0,d.up)("el-tag"),V=(0,d.up)("el-table"),k=(0,d.up)("el-pagination"),U=(0,d.up)("el-descriptions-item"),C=(0,d.up)("el-descriptions"),F=(0,d.up)("el-drawer"),y=(0,d.up)("el-dialog");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d._)("div",u,[(0,d.Wm)(W,{model:e.searchForm,"label-width":"120px"},{default:(0,d.w5)((()=>[(0,d.Wm)(f,{class:"input",label:"直播店铺"},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.searchForm.name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.searchForm.name=l)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,d.Wm)(b,{class:"search",type:"primary"},{default:(0,d.w5)((()=>[(0,d.Uk)("查询")])),_:1})]),(0,d._)("div",m,[(0,d._)("div",o,[(0,d.Wm)(b,{type:"primary",onClick:l[1]||(l[1]=l=>e.dialogVisible1=!0)},{default:(0,d.w5)((()=>[(0,d.Uk)("新增排班")])),_:1})]),(0,d.Wm)(V,{data:e.tableData(),border:"",style:{width:"100%"}},{default:(0,d.w5)((()=>[(0,d.Wm)(_,{prop:"scheduleCode",label:"排班编号","min-width":"60"}),(0,d.Wm)(_,{prop:"scheduleName",label:"直播店铺","min-width":"60"}),(0,d.Wm)(_,{prop:"contactPerson",label:"直播间编号","min-width":"60"}),(0,d.Wm)(_,{prop:"startTime",label:"直播开始时间","min-width":"100"}),(0,d.Wm)(_,{prop:"endTime",label:"直播结束时间","min-width":"100"}),(0,d.Wm)(_,{prop:"streamHostId",label:"主播","min-width":"60"}),(0,d.Wm)(_,{prop:"streamShift",label:"直播班次","min-width":"60"}),(0,d.Wm)(_,{prop:"status",label:"排班状态",width:"100",filters:[{text:"进行中",value:0},{text:"已结束",value:1}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},{default:(0,d.w5)((e=>[(0,d.Wm)(g,{type:0==e.row.status?"success":"danger","disable-transitions":""},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(0==e.row.status?"进行中":"已结束"),1)])),_:2},1032,["type"])])),_:1},8,["filter-method"]),(0,d.Wm)(_,{prop:"deductionPoints",label:"预设扣点","min-width":"60"}),(0,d.Wm)(_,{prop:"remark",label:"直播间联系人","min-width":"60"}),(0,d.Wm)(_,{prop:"telephone",label:"排直播间联系号码","min-width":"70"}),(0,d.Wm)(_,{prop:"createBy",label:"货主卖手","min-width":"60"}),(0,d.Wm)(_,{fixed:"right",label:"操作","min-width":"60"},{default:(0,d.w5)((l=>[(0,d.Wm)(b,{link:"",type:"primary",size:"small",onClick:a=>e.handleOpenEdit(l.row)},{default:(0,d.w5)((()=>[(0,d.Uk)("修改")])),_:2},1032,["onClick"]),(0,d.Wm)(b,{link:"",type:"primary",size:"small",onClick:a=>e.openDetails(l.row)},{default:(0,d.w5)((()=>[(0,d.Uk)("详情")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,d._)("div",r,[(0,d.Wm)(k,{"current-page":e.data.page,"onUpdate:currentPage":l[2]||(l[2]=l=>e.data.page=l),"page-size":e.data.limit,"onUpdate:pageSize":l[3]||(l[3]=l=>e.data.limit=l),layout:"prev, pager, next ,total,sizes",total:e.data.total,onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])]),(0,d._)("div",i,[(0,d._)("div",null,[(0,d.Wm)(F,{modelValue:e.drawer,"onUpdate:modelValue":l[4]||(l[4]=l=>e.drawer=l),title:"排班详情",direction:e.direction},{default:(0,d.w5)((()=>[(0,d.Wm)(C,{border:"",size:"large",direction:"vertical",title:"排班基本信息"},{default:(0,d.w5)((()=>[(0,d.Wm)(U,{label:"直播店铺"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(e.rowDetails.streamPlatform),1)])),_:1}),(0,d.Wm)(U,{label:"代购费"},{default:(0,d.w5)((()=>[(0,d.Wm)(g,{size:"small"},{default:(0,d.w5)((()=>[(0,d.Uk)("50")])),_:1})])),_:1}),(0,d.Wm)(U,{label:"直播班次"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(e.rowDetails.streamShift),1)])),_:1}),(0,d.Wm)(U,{label:"播货开始时间"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(e.rowDetails.startTime),1)])),_:1}),(0,d.Wm)(U,{label:"播货结束时间"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(e.rowDetails.endTime),1)])),_:1}),(0,d.Wm)(U,{label:"扣点比例"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(e.rowDetails.deductionPoints),1)])),_:1}),(0,d.Wm)(U,{label:"添加时间"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(e.rowDetails.createTime),1)])),_:1}),(0,d.Wm)(U,{label:"添加人"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(e.rowDetails.createBy),1)])),_:1}),(0,d.Wm)(U,{label:"修改时间"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(e.rowDetails.updateTime),1)])),_:1}),(0,d.Wm)(U,{label:"修改人"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,t.zw)(e.rowDetails.updateBy),1)])),_:1})])),_:1}),(0,d.Wm)(C,{border:"",size:"large",direction:"vertical",title:"直播人员信息",style:{"margin-top":"50px"}},{default:(0,d.w5)((()=>[(0,d.Wm)(U,{label:"售前客服"},{default:(0,d.w5)((()=>[(0,d.Wm)(g,{size:"small"},{default:(0,d.w5)((()=>[(0,d.Uk)("张三")])),_:1})])),_:1}),(0,d.Wm)(U,{label:"直播助理"},{default:(0,d.w5)((()=>[(0,d.Wm)(g,{size:"small"},{default:(0,d.w5)((()=>[(0,d.Uk)("张三")])),_:1})])),_:1}),(0,d.Wm)(U,{label:"场控"},{default:(0,d.w5)((()=>[(0,d.Wm)(g,{size:"small"},{default:(0,d.w5)((()=>[(0,d.Uk)("张三")])),_:1})])),_:1}),(0,d.Wm)(U,{label:"主播"},{default:(0,d.w5)((()=>[(0,d.Wm)(g,{size:"small"},{default:(0,d.w5)((()=>[(0,d.Uk)("张三")])),_:1})])),_:1}),(0,d.Wm)(U,{label:"其他人员"},{default:(0,d.w5)((()=>[(0,d.Wm)(g,{size:"small"},{default:(0,d.w5)((()=>[(0,d.Uk)("张三")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","direction"])]),(0,d.Wm)(y,{modelValue:e.dialogVisible1,"onUpdate:modelValue":l[15]||(l[15]=l=>e.dialogVisible1=l),title:"新建客户",width:"30%","close-on-click-modal":!0,"show-close":!1},{footer:(0,d.w5)((()=>[(0,d._)("span",s,[(0,d.Wm)(b,{onClick:l[14]||(l[14]=l=>e.dialogVisible1=!1)},{default:(0,d.w5)((()=>[(0,d.Uk)("取消")])),_:1}),(0,d.Wm)(b,{type:"primary",onClick:e.handleAddSchedule},{default:(0,d.w5)((()=>[(0,d.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,d.w5)((()=>[(0,d._)("div",null,[(0,d.Wm)(W,{model:e.scheduleForm,"label-width":"120px",rules:e.scheduleRules},{default:(0,d.w5)((()=>[(0,d.Wm)(f,{label:"客户编码",prop:"scheduleCode",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.scheduleCode,"onUpdate:modelValue":l[5]||(l[5]=l=>e.scheduleForm.scheduleCode=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"客户名字",prop:"scheduleName",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.scheduleName,"onUpdate:modelValue":l[6]||(l[6]=l=>e.scheduleForm.scheduleName=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"备注",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.remark,"onUpdate:modelValue":l[7]||(l[7]=l=>e.scheduleForm.remark=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"手机号",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.telephone,"onUpdate:modelValue":l[8]||(l[8]=l=>e.scheduleForm.telephone=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"联系人",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.contactPerson,"onUpdate:modelValue":l[9]||(l[9]=l=>e.scheduleForm.contactPerson=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"客户类型",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.scheduleType,"onUpdate:modelValue":l[10]||(l[10]=l=>e.scheduleForm.scheduleType=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"出借金额上限",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.lendMoneyLimit,"onUpdate:modelValue":l[11]||(l[11]=l=>e.scheduleForm.lendMoneyLimit=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"出借数量上限",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.lendAmountLimit,"onUpdate:modelValue":l[12]||(l[12]=l=>e.scheduleForm.lendAmountLimit=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"地址",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.address,"onUpdate:modelValue":l[13]||(l[13]=l=>e.scheduleForm.address=l)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"]),(0,d.Wm)(y,{modelValue:e.dialogVisible2,"onUpdate:modelValue":l[24]||(l[24]=l=>e.dialogVisible2=l),title:"编辑仓位",width:"30%","before-close":e.handleClose,"show-close":!1},{footer:(0,d.w5)((()=>[(0,d._)("span",n,[(0,d.Wm)(b,{onClick:l[23]||(l[23]=l=>e.dialogVisible2=!1)},{default:(0,d.w5)((()=>[(0,d.Uk)("取消")])),_:1}),(0,d.Wm)(b,{type:"primary",onClick:e.handleUpdateSchedule},{default:(0,d.w5)((()=>[(0,d.Uk)(" 确认 ")])),_:1},8,["onClick"])])])),default:(0,d.w5)((()=>[(0,d._)("div",null,[(0,d.Wm)(W,{model:e.scheduleForm,"label-width":"120px"},{default:(0,d.w5)((()=>[(0,d.Wm)(f,{label:"客户编码",prop:"scheduleCode",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.scheduleCode,"onUpdate:modelValue":l[16]||(l[16]=l=>e.scheduleForm.scheduleCode=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"客户名字",prop:"scheduleName",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.scheduleName,"onUpdate:modelValue":l[17]||(l[17]=l=>e.scheduleForm.scheduleName=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"备注",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.remark,"onUpdate:modelValue":l[18]||(l[18]=l=>e.scheduleForm.remark=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"手机号",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.telephone,"onUpdate:modelValue":l[19]||(l[19]=l=>e.scheduleForm.telephone=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"出借金额上限",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.lendMoneyLimit,"onUpdate:modelValue":l[20]||(l[20]=l=>e.scheduleForm.lendMoneyLimit=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"出借数量上限",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.lendAmountLimit,"onUpdate:modelValue":l[21]||(l[21]=l=>e.scheduleForm.lendAmountLimit=l)},null,8,["modelValue"])])),_:1}),(0,d.Wm)(f,{label:"地址",required:!0},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.scheduleForm.address,"onUpdate:modelValue":l[22]||(l[22]=l=>e.scheduleForm.address=l)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue","before-close"])])],64)}var h=a(4870),p=a(2655),w=a(3026),f=(0,d.aZ)({name:"UserRole",components:{},setup(){const e=(0,h.iH)(!1),l=(0,h.iH)(!1),a=(0,h.iH)(!1),t=(0,h.qj)({data:[]}),u=(0,h.qj)({scheduleName:"",scheduleCode:"",remark:"",status:0}),m=(0,h.qj)({name:""}),o=(0,h.iH)({streamShift:"",streamPlatform:"",createBy:"",createTime:"",startTime:"2023-07-05 08:00:00",endTime:"2023-07-06 08:00:00",updateBy:"",updateTime:null,deductionPoints:1}),r=(0,h.qj)({scheduleName:[{required:!0,message:"请输入内容",trigger:"blur"},{min:3,max:10,message:"账号长度 在 3 到 10长度之间",trigger:"blur"}],scheduleCode:[{required:!0,message:"请输入内容",trigger:"blur"},{min:3,max:10,message:"账号长度 在 3 到 10长度之间",trigger:"blur"}]});let i=(0,h.qj)({data:{page:1,limit:10,total:t.data.length}});const s=(e,l)=>l.status==e;(0,d.bv)((()=>{n(i.data.page,i.data.limit)}));const n=(e,l)=>{(0,w.m9)(e,l).then((e=>{t.data=e.rows,i.data.total=e.total}))},c=()=>t.data,f=e=>{i.page=e,n(e,i.data.limit)},W=e=>{i.limit=e,n(i.data.page,e)},b=()=>{p.T.confirm("确认提交?").then((()=>{(0,w.tI)(u).then((()=>{l.value=!1,n(i.data.page,i.data.limit)}))})).catch((()=>{}))},_=l=>{e.value=!0,o.value=l},g=e=>{a.value=!0,u.scheduleCode=e.scheduleCode,u.scheduleName=e.scheduleName,u.remark=e.remark,u.maxCap=e.maxCap,u.id=e.id},V=()=>{p.T.confirm("确认提交?").then((()=>{updateSchedule(u).then((()=>{a.value=!1,n(i.data.page,i.data.limit)}))})).catch((()=>{}))},k=e=>{p.T.confirm("确认提交?").then((()=>{done()})).catch((()=>{}))};return{scheduleData:t,drawer:e,rowDetails:o,dialogVisible1:l,dialogVisible2:a,searchForm:m,scheduleForm:u,scheduleRules:r,tableData:c,filterTag:s,handleCurrentChange:f,handleSizeChange:W,handleClose:k,openDetails:_,handleAddSchedule:b,handleGetScheduleList:n,handleUpdateSchedule:V,handleOpenEdit:g,...(0,h.BK)(i)}}}),W=a(89);const b=(0,W.Z)(f,[["render",c],["__scopeId","data-v-0aa3fe88"]]);var _=b}}]);
//# sourceMappingURL=681.9b14eaff.js.map